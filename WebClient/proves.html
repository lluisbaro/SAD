<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Xat Javascript</title>
  <script src="ClientController.js"></script>
  <script src="ClientModel.js"></script>
  <script>
  var clientController;
  function once_loaded(){
    var xat = document.getElementById("xat");
    xat.style.display = "none";
  }
  function main_start(){
    document.getElementById("xat").style.display="block";
    document.getElementById("inici").style.display="none";
    var nick = document.getElementById('nick').value;
    clientController = new ClientController('ws://127.0.0.1:8080', nick);
  }
  function send(){
    var missatge = document.getElementById('missatge');
    clientController.send(missatge.value);
    missatge.value = "";
  }
  function refresh(){
    var missatges = clientController.messages;
    var missatge = missatges[missatges.length-1];
    var textXat = document.getElementById('textXat').innerHTML;
    textXat = textXat+'<br>'+missatge.nick+': '+missatge.message;
  }



  </script>
</head>
<body onload="once_loaded()">

  <div id="inici">
    <input type="text" id="nick" maxlength="100"><button onclick="main_start()">Entrar!</button>
  </div>
  <div id="xat">
    <div id="textXat">

    </div>
    <input type="text" id="missatge" maxlength="100"><button onclick="main_start()">Enviar!</button>
  </div>
</body>
</html>
