<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Xat Javascript</title>
  <script src="ClientController.js"></script>
  <script src="ClientModel.js"></script>
  <script>
  var messages = new Messages();
  var clientController;
  var textXat;
  function once_loaded(){
    var xat = document.getElementById("xat");
    xat.style.display = "none";
    textXat = document.getElementById('textXat').innerHTML;
  }
  function main_start(){
    document.getElementById("xat").style.display="block";
    document.getElementById("inici").style.display="none";
    var nick = document.getElementById('nick').value;
    clientController = new ClientController('ws://127.0.0.1:8887', nick);
  }
  function send(){
    var missatge = document.getElementById('missatge');
    clientController.send(missatge.value);
    missatge.value = "";
  }
  function refresh(missatge){
    //document.write(messages.messages.nick[0]);
    //var missatge = messages[messages.length-1];
    textXat = textXat+'<br>'+missatge.nick+': '+missatge.message;
    document.getElementById('textXat').innerHTML = textXat;
  }
  </script>
  <style type="text/css">
  body{
    background-position: center;
    background-image: url('https://st2.depositphotos.com/2963489/9411/v/950/depositphotos_94116894-stock-illustration-seamless-mobile-apps-pattern.jpg');
  }
  .content{
    position: relative;
    left: 10%;
    right: 10%;
    width: 80%;
    background-image: url('images/bg.png');
    border-radius: 10px;
    border-style: solid;
    border-width: 1px;
  }
  .centrat{
    margin: 0 auto;
  }
  </style>
</head>
<body onload="once_loaded()">

  <div id="inici" class="content">
    <div class="centrat">
    <input type="text" id="nick" maxlength="100"><button onclick="main_start()">Entrar!</button>
  </div>
  </div>
  <div id="xat" class="content">
    <div id="textXat">

    </div>
    <input type="text" id="missatge" maxlength="100"><button onclick="send()">Enviar!</button>
  </div>
</body>
</html>
